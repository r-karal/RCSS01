<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Market Trends - CodeSprint 2026</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .dropdown-item {
        color: #eebebe !important;
        padding: 10px 20px;
    }

    .dropdown-item:hover {
        background: rgba(238, 190, 190, 0.2) !important;
        color: #fff !important;
    }

    /* Fixes the button glow/background */
    .btn-outline-light:focus, .btn-outline-light:active {
        box-shadow: none !important;
        background-color: transparent !important;
    }
         body {
                min-height: 100vh;
                background:
                linear-gradient(rgba(0,0,0,0.7),rgba(0,0,0,0), rgba(0,0,0,0)),url("/static/flowers-1.jpeg") no-repeat center center fixed;
                background-size:cover;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                color: #eebebe;
         }
         .sidebar{
            border-radius: 5px;
             border: none;
              backdrop-filter: blur(4px);
             background: rgba(0,0,0,0.6);
             color: #eebebe;
             padding-bottom: 300px;
             border: 1px;
             border-style: solid;
             border-color: #eebebe;
             display: grid;
            right:0;
            height: 94vh;
         }
        .btnb{
            background: #9dbe56;
            display: grid;
            padding: 15px;
            border-radius: 5px;
            border-width: 0;
        }
        .textb{
            color: #9dbe56;
        }
        .btns{
            background: #ad2e24;
            display: grid;
            padding: 15px;
            border-radius: 5px;
            border-width: 0;
        }
        .texts{
            color: #ad2e24;
        }
        .mb{
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 20px
        }
        .form-control{
            background: #181926;
            border-radius: 5px;
            border-style: solid;
            border-color: #eebebe;
            color: white;
        }
        .form-control:focus{
            background: #181926;
            border-radius: 5px;
            border-style: solid;
            border-color: #eebebe;
            color: white;
        }
        .chart-page{
            filter: opacity(2tradingview_chart0%);
        }
        #tradingview_chart{
            backdrop-filter:blur(4px) !important;
            filter: opacity(90%);
            border-style: solid;
            border-width: 1px;
            border-color: #eebebe;
        }
        .carde{
            background-color: #181926;
            border-style: solid;
            border-width: 1px;
            border-color: #eebebe;
            border-radius: 5px;
            margin: 0 auto;
            padding-left :100px;
            padding-right :100px;
            padding-bottom: 30px;
            padding-top: 50px;
        }
        .navbarname{
            color: #eebebe;
            text-decoration: none;
            font-size: 30px;
            font-weight: bold;
            margin-left: 15px;        
        
        }
        .nav-link{
            color:#ffecec;
            border-style: solid;
            border-width: 1px;
            border-radius: 5px;
            min-height: 40px;
            padding: 5px;
            margin:5px;
        }
        .h4{
            color: #9dbe56;
        }
        .h5{
            font-size: 25px;
            color: #9dbe56;
        }
        .btnotom{
            color: #ffecec;
            border-radius: 5px;
            border-style: solid;
            border-color: #ffecec;
            border-width: 1px;
            text-decoration: none;
            display: flex;
            justify-content: center;
            margin-left: 10vh;
            margin-right: 10vh;
            padding: 0 30px;

        }
        


    </style>
</head>
<body>

<nav class="navbar navbar-dark bg-transparent">
    <div class="container-fluid px-4">
        <a class="navbar-brand tradeo" href="/">
            <img src="static/aught.png" style="width: 40px;height: 40px;" alt="Logo">
        </a>

        <div class="d-flex align-items-center">
            <span class="text-light me-3 d-none d-md-block">Welcome, {{ user.username }}</span>
            
            <div class="dropdown">
                <button class="btn btn-outline-light border-0" type="button" id="navMenu" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: 1.5rem;">
                    &#9776;
                </button>
                <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="navMenu" style="background: rgba(24, 25, 38, 0.95); backdrop-filter: blur(10px); border: 1px solid #eebebe;">
                    <li><a class="dropdown-item nav-link-custom" href="/">Dashboard</a></li>
                    <li><a class="dropdown-item nav-link-custom" href="/market">Market View</a></li>
                    <li><a class="dropdown-item nav-link-custom" href="/leaderboard">Leaderboard</a></li>
                    <li><hr class="dropdown-divider border-secondary"></li>
                    <li><a class="dropdown-item text-danger fw-bold" href="/logout">Sign Out</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-9 p-4">
            <h2 class="mb-4 text-center">Live Market View</h2>
            <div class="tradingview-widget-container shadow-lg" style="height: 75vh; width: 100%; border-radius: 8px; overflow: hidden;">
                <div id="tradingview_chart" style="height: 100%; width: 100%;"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                <script type="text/javascript">
                new TradingView.widget({
                    "autosize": true,
                    "symbol": "NASDAQ:AMD",
                    "interval": "D",
                    "timezone": "Etc/UTC",
                    "theme": "dark",
                    "style": "1",
                    "locale": "en",
                    "toolbar_bg": "#f1f3f6",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "show_symbol_search": true,
                    "save_image": true,
                    "watchlist": ["NASDAQ:AAPL","NASDAQ:TSLA","NASDAQ:NVDA","NASDAQ:AMZN","NASDAQ:GOOGL"],
                    "container_id": "tradingview_chart"
                });
                </script>
            </div>
        </div>

        <div class="col-lg-3 sidebar p-4">
            <h4 class="mb-4 text-center">Quick Trade</h4>
            
            <div class="carde text-center">
                <div class="txt">Available Cash:</div>
                <div class="h4">${{ "{:,.2f}".format(user.balance|float) }}</div>
                <div class="txt">Portfolio Value:</div>
                <div class="h5">${{ "{:,.2f}".format(portfolio_value) }}</div>
            </div>

            <hr class="border-secondary">

            <form action="/buy" method="POST" class="mb-4">
                <h6 class="textb">Buy Position</h6>
                <div class="mb-2">
                    <input type="text" name="ticker" class="form-control" placeholder="Symbol (e.g. AAPL)" required>
                </div>
                <div class="mb-3">
                    <input type="number" name="quantity" class="form-control" placeholder="Quantity" min="1" value="1" required>
                </div>
                <button type="submit" class="btnb">Execute Buy</button>
            </form>

            <hr class="border-secondary">

            <form action="/sell" method="POST">
                <h6 class="texts">Sell Position</h6>
                <div class="mb-2">
                    <input type="text" name="ticker" class="form-control" placeholder="Symbol (e.g. AAPL)" required>
                </div>
                <div class="mb-3">
                    <input type="number" name="quantity" class="form-control" placeholder="Quantity" min="1" value="1" required>
                </div>
                <button type="submit" class="btns">Execute Sell</button>
            </form>
            
            <div class="mt-5">
                <a href="/" class="btnotom">Return to Dashboard</a>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>